{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'default/css/sweetalert.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'default/css/datatables.min.css' %}"/>
    <title>WM - Locações, Recarga, Suprimentos e Informática</title>
    <meta name="description"
          content="Há 8 anos estamos trabalhando com Assistência técnica, Reposição de suprimentos, Suporte e Manutenção dos equipamentos.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Google fonts-->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,700">
    <!-- Swiper slider-->
    <link rel="stylesheet" href="{% static "vendor/swiper/swiper-bundle.min.css" %}">
    <!-- Leaflet maps-->
    <link rel="stylesheet" href="{% static "vendor/leaflet/leaflet.css" %}">
    <!-- Choices.js [Custom select]-->
    <link rel="stylesheet" href="{% static "vendor/choices.js/public/assets/styles/choices.css" %}">
    <!-- Theme stylesheet-->
    <link rel="stylesheet" href="{% static "css/style.blue.css" %}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="{% static "css/custom.css" %}">
    <!-- Favicon and apple touch icons-->
    <link rel="shortcut icon" href="{% static "img/favicon.ico" %}" type="image/x-icon">
    <link rel="icon" href="{% static "img/favicon.ico" %}" type="image/x-icon">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <script src="{% static 'default/js/jquery.min.js' %}"></script>
</head>
<body>
<div class="wide" id="all">
    {% block content %}
    {% endblock %}
</div>
<!-- JavaScript files-->
<script src="{% static "vendor/bootstrap/js/bootstrap.bundle.min.js" %}"></script>
<script src="{% static "vendor/waypoints/lib/noframework.waypoints.js" %}"></script>
<script src="{% static "vendor/swiper/swiper-bundle.min.js" %}"></script>
<script src="{% static "vendor/choices.js/public/assets/scripts/choices.js" %}"></script>
<script src="{% static "js/theme.js" %}"></script>
<script src="{% static "vendor/leaflet/leaflet.js" %}"></script>
<script>
    // ------------------------------------------------------- //
    //  Styled Leaflet Map
    // ------------------------------------------------------ //

    "use strict";

    document.addEventListener("DOMContentLoaded", function () {
        const mapElem = document.getElementById("contactMap");

        if (mapElem) {
            var map = L.map("contactMap", {
                center: [-7.2218218, -35.9201164],
                zoom: 13,
                scrollWheelZoom: false,
            });

            var tiles = new L.tileLayer("//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}", {
                attribution:
                    '',
                subdomains: "abcd",
                minZoom: 0,
                maxZoom: 21,
                ext: "png",
            }).addTo(map);

            var dragging = false,
                tapping = false;

            if (window.innerWidth > 700) {
                dragging = true;
                tapping = true;
            }

            var customIcon = L.icon({
                iconUrl: "{% static "img/marker.png" %}",
                iconSize: [25, 40],
            });

            var marker = L.marker([-7.2218218, -35.9201164], {
                tap: tapping,
                icon: customIcon,
                opacity: 1,
            });

            marker
                .addTo(map)
                .bindPopup(
                    "<div class='p-4'><h5 class='mb-3'>Nosso Endereço</h5><p class='mb-0'>Estamos localizados na Rua Rita Pereira de Araújo, 398, Bodocongó, Campina Grande, PB - 58430-480. </p></div>",
                    {
                        className: "map-custom-popup",
                        minwidth: 200,
                        maxWidth: 600,
                    }
                );
        }
    });

</script>
<!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.7.1/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


{% if messages %}
    {% for message in messages %}
        {% if message.tags == 'error' %}
            <script>
                $(document).ready(function () {
                    swal("Erro", "{{ message|safe }}", "error")
                });
            </script>
        {% else %}
            <script>
                $(document).ready(function () {
                    swal("Sucesso", "{{ message|safe }}", "success")
                });
            </script>
        {% endif %}
    {% endfor %}
{% endif %}

<script type="text/javascript" src="{% static 'default/js/sweetalert.min.js' %}"></script>

<script type="text/javascript" src="{% static 'default/js/datatables.min.js' %}"></script>

<script type="text/javascript" src="{% static 'default/js/moment-with-locales.min.js' %}"></script>

<script type="text/javascript"
        src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.10.3/js/bootstrap-tour.min.js"></script>

<script src="{% static 'default/js/customTour.js' %}"></script>


<script type="text/javascript">

    var tour = null;

    function init_tour() {
        tour.restart();
        tour.start(true);
    }

    $(document).ready(function () {
        $('[name=cep],[name=zipcode]').focusout(function () {
            $('#loading').show();
            var cep = $('[name=cep],[name=zipcode]');
            var cepCode = cep.val();
            if (cepCode.length <= 0) return;
            $.ajax({
                type: 'GET',
                url: 'https://apps.widenet.com.br/busca-cep/api/cep.json',
                data: {code: cepCode},
                success: function (result) {
                    $('#loading').hide();
                    if (result.status == 0) {
                        alert(result.message || "Houve um erro desconhecido");
                        return;
                    } else {
                        var index = result.address.search('-');
                        if (index != -1) {
                            address = result.address.substring(0, index);
                        } else {
                            address = result.address;
                        }
                        $('[name=address]').val(address);
                        $('[name=district]').val(result.district);
                        $('[name=state]').val(result.state);
                        $('[name=city]').val(result.city);
                    }
                }
            });
        });
    });
</script>
</body>
</html>
